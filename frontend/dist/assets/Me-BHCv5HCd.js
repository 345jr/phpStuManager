import{r as u,o as m,c as r,b as e,t as s,F as x,h as y,g as d,l as v,a as n}from"./index-BHy6Sa2k.js";const b={class:"bg-gray-100 min-h-screen py-8 px-4 sm:px-6 lg:px-8"},f={class:"max-w-4xl mx-auto"},w={class:"bg-white shadow-md rounded-lg p-6 mb-8 flex items-center space-x-6"},C=["src"],k={class:"text-2xl font-bold text-gray-800"},I={class:"text-gray-600"},S={class:"text-gray-600"},B={class:"bg-white shadow-md rounded-lg p-6"},j={key:0,class:"space-y-4"},E={class:"text-lg font-semibold text-gray-800"},F={class:"text-sm text-gray-500"},L={class:"text-sm text-gray-500"},M=["onClick"],D={key:1,class:"text-center text-gray-500"},$={__name:"Me",setup(N){const h=v(),l=u([]),a=u({}),i=async()=>{try{const t=await d.get("http://199.115.229.247:8080/api/enrolledCourses",{withCredentials:!0});l.value=t.data,console.log(l.value)}catch(t){console.error("获取已选课程失败:",t)}},_=async()=>{try{const t=await d.get("http://199.115.229.247:8080/api/studentInfo",{withCredentials:!0});a.value=t.data}catch(t){console.error("获取学生信息失败:",t)}},p=async t=>{try{await d.post("http://199.115.229.247:8080/api/unenroll",{courseId:t}),alert("退课成功"),i()}catch(c){console.error("退课失败:",c),alert("退课失败")}},g=async()=>{try{const t=await d.post("/api/logout",{},{withCredentials:!0});t.status===200?(localStorage.removeItem("token"),localStorage.removeItem("student"),h.push("/")):alert("退出登录失败: "+t.data.message)}catch(t){console.error("退出登录失败:",t),alert("退出登录失败")}};return m(()=>{i(),_()}),(t,c)=>(n(),r("div",b,[e("div",f,[e("div",w,[e("img",{src:a.value.avatar,alt:"学生头像",class:"w-24 h-24 rounded-full object-cover"},null,8,C),e("div",null,[e("h1",k,"姓名 :"+s(a.value.name),1),e("p",I,"学号: "+s(a.value.id),1),e("p",S,"账号: "+s(a.value.email),1)]),e("button",{onClick:g,class:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors"}," 退出登录 ")]),e("div",B,[c[0]||(c[0]=e("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"已选课程",-1)),l.value.length>0?(n(),r("div",j,[(n(!0),r(x,null,y(l.value,o=>(n(),r("div",{key:o.course_id,class:"flex justify-between items-center p-4 bg-gray-50 rounded-md"},[e("div",null,[e("h3",E,"课程名字 :"+s(o.course_name),1),e("p",F,"开课时间: "+s(o.start_time)+" 课时 : "+s(o.class_hour),1),e("p",L,"教师: "+s(o.teacher),1)]),e("button",{onClick:R=>p(o.course_id),class:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors"}," 退课 ",8,M)]))),128))])):(n(),r("div",D,"暂无已选课程"))])])]))}};export{$ as default};
