import{r as h,o as m,c as a,b as e,t as s,F as _,h as x,g as d,l as y,a as n}from"./index-CYIJ2KlJ.js";const w="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M15%202H9v2H7v6h2V4h6V2zm0%208H9v2h6v-2zm0-6h2v6h-2V4zM4%2016h2v-2h12v2H6v4h12v-4h2v6H4v-6z'%20fill='currentColor'/%3e%3c/svg%3e",f={class:"bg-gray-100 min-h-screen py-8 px-4 sm:px-6 lg:px-8"},b={class:"max-w-4xl mx-auto"},C={class:"bg-white shadow-md rounded-lg p-6 mb-8 flex items-center space-x-6"},k={class:"text-2xl font-bold text-gray-800"},H={class:"text-gray-600"},I={class:"text-gray-600"},S={class:"bg-white shadow-md rounded-lg p-6"},z={key:0,class:"space-y-4"},B={class:"text-lg font-semibold text-gray-800"},M={class:"text-sm text-gray-500"},V={class:"text-sm text-gray-500"},j=["onClick"],E={key:1,class:"text-center text-gray-500"},N={__name:"Me",setup(F){const u=y(),l=h([]),c=h({}),i=async()=>{try{const t=await d.get("http://199.115.229.247:8080/api/enrolledCourses",{withCredentials:!0});l.value=t.data,console.log(l.value)}catch(t){console.error("获取已选课程失败:",t)}},g=async()=>{try{const t=await d.get("http://199.115.229.247:8080/api/studentInfo",{withCredentials:!0});c.value=t.data}catch(t){console.error("获取学生信息失败:",t)}},p=async t=>{try{await d.post("http://199.115.229.247:8080/api/unenroll",{courseId:t}),alert("退课成功"),i()}catch(o){console.error("退课失败:",o),alert("退课失败")}},v=async()=>{try{const t=await d.post("/api/logout",{},{withCredentials:!0});t.status===200?(localStorage.removeItem("token"),localStorage.removeItem("student"),u.push("/")):alert("退出登录失败: "+t.data.message)}catch(t){console.error("退出登录失败:",t),alert("退出登录失败")}};return m(()=>{i(),g()}),(t,o)=>(n(),a("div",f,[e("div",b,[e("div",C,[o[0]||(o[0]=e("img",{src:w,alt:"学生头像",class:"w-24 h-24 rounded-full object-cover"},null,-1)),e("div",null,[e("h1",k,"姓名 :"+s(c.value.name),1),e("p",H,"学号: "+s(c.value.id),1),e("p",I,"账号: "+s(c.value.email),1)]),e("button",{onClick:v,class:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors"}," 退出登录 ")]),e("div",S,[o[1]||(o[1]=e("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"已选课程",-1)),l.value.length>0?(n(),a("div",z,[(n(!0),a(_,null,x(l.value,r=>(n(),a("div",{key:r.course_id,class:"flex justify-between items-center p-4 bg-gray-50 rounded-md"},[e("div",null,[e("h3",B,"课程名字 :"+s(r.course_name),1),e("p",M,"开课时间: "+s(r.start_time)+" 课时 : "+s(r.class_hour),1),e("p",V,"教师: "+s(r.teacher),1)]),e("button",{onClick:L=>p(r.course_id),class:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors"}," 退课 ",8,j)]))),128))])):(n(),a("div",E,"暂无已选课程"))])])]))}};export{N as default};
