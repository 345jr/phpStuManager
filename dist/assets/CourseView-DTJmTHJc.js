import{j as b,r as n,f as h,c as i,a as s,t as o,k as w,n as k,g as v,l as C,o as r}from"./index-CeDRgsN7.js";const B={class:"container mx-auto px-4 py-8 max-w-4xl"},j={class:"bg-white rounded-lg shadow-lg overflow-hidden"},V={key:0,class:"container mx-auto px-4 py-8 text-center"},$={key:1,class:"container mx-auto px-4 py-8 max-w-4xl"},E={class:"relative"},I=["src"],N={class:"p-6"},R={class:"text-3xl font-bold text-gray-800 mb-4"},S={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},z={class:"flex items-center space-x-2"},D={class:"text-gray-600"},L={class:"flex items-center space-x-2"},M={class:"text-gray-600"},q={class:"flex items-center space-x-2"},A={class:"text-gray-600"},F={class:"flex items-center space-x-2"},G={class:"text-gray-600"},H={class:"flex items-center space-x-2"},J={class:"text-gray-600"},K={class:"mb-6"},O={class:"text-gray-600"},P={class:"mb-6"},Q={class:"text-gray-600"},T={class:"flex items-center space-x-4"},U=["disabled"],W={key:2,class:"container mx-auto px-4 py-8 text-center"},Z={__name:"CourseView",setup(X){const _=b(),g=C(),u=_.params.id,e=n(null),d=n([]),p=n(!0),c=n(!1),a=n(""),m=async()=>{try{const l=await v.get("/api/courses");d.value=l.data;const t=d.value.find(x=>x.course_id==u);t?e.value=t:(console.warn(`未找到 course_id 为 ${u} 的课程`),e.value=null)}catch(l){console.error("获取课程详情失败:",l),e.value=null}finally{p.value=!1}},y=async l=>{if(e.value){c.value=!0;try{const t=await v.post("/api/enroll",{courseId:l});a.value="选课成功！"}catch(t){a.value="选课失败，请稍后重试",console.error("选课失败:",t)}finally{c.value=!1}}},f=()=>{g.push("/")};return h(()=>{m()}),(l,t)=>(r(),i("div",B,[s("div",j,[p.value?(r(),i("div",V,t[1]||(t[1]=[s("i",{class:"pi pi-spin pi-spinner text-4xl text-gray-500"},null,-1),s("p",{class:"mt-2 text-gray-600"},"加载中...",-1)]))):e.value?(r(),i("div",$,[s("div",E,[s("img",{src:`${e.value.course_id}.jpg`,alt:"Course Image",class:"w-full h-64 object-cover"},null,8,I),s("button",{class:"absolute top-1 right-4 bg-gray-800 text-white px-2 py-1 rounded-md hover:bg-gray-700 transition-colors duration-200",onClick:f},t[2]||(t[2]=[s("i",{class:"pi pi-arrow-right text-lg"},null,-1),s("span",{class:"absolute inset-0 rounded-md opacity-0 hover:opacity-100 transition-opacity duration-300",style:{"box-shadow":"0 0 8px 2px rgba(0, 123, 255, 0.7)"}},null,-1)]))]),s("div",N,[s("h1",R,o(e.value.course_name),1),s("div",S,[s("div",z,[t[3]||(t[3]=s("i",{class:"pi pi-users text-gray-500"},null,-1)),s("span",D,"最大人数: "+o(e.value.max_students),1)]),s("div",L,[t[4]||(t[4]=s("i",{class:"pi pi-user-plus text-gray-500"},null,-1)),s("span",M,"当前人数: "+o(e.value.current_num),1)]),s("div",q,[t[5]||(t[5]=s("i",{class:"pi pi-clock text-gray-500"},null,-1)),s("span",A,"开课时间: "+o(e.value.start_time),1)]),s("div",F,[t[6]||(t[6]=s("i",{class:"pi pi-hourglass text-gray-500"},null,-1)),s("span",G,"课时: "+o(e.value.class_hour),1)]),s("div",H,[t[7]||(t[7]=s("i",{class:"pi pi-user text-gray-500"},null,-1)),s("span",J,"授课老师: "+o(e.value.teacher),1)])]),s("div",K,[t[8]||(t[8]=s("h2",{class:"text-xl font-semibold text-gray-800 mb-2"},"课程简介",-1)),s("p",O,o(e.value.brief),1)]),s("div",P,[t[9]||(t[9]=s("h2",{class:"text-xl font-semibold text-gray-800 mb-2"},"详细描述",-1)),s("p",Q,o(e.value.description),1)]),s("div",T,[s("button",{onClick:t[0]||(t[0]=x=>y(e.value.course_id)),disabled:c.value||e.value.current_num>=e.value.max_students,class:"flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200"},[t[10]||(t[10]=s("i",{class:"pi pi-check"},null,-1)),s("span",null,o(c.value?"选课中...":"立即选课"),1)],8,U),a.value?(r(),i("span",{key:0,class:k(a.value.includes("成功")?"text-green-500":"text-red-500")},o(a.value),3)):w("",!0)])])])):(r(),i("div",W,t[11]||(t[11]=[s("p",{class:"text-red-500"},"未找到课程信息",-1)])))])]))}};export{Z as default};
